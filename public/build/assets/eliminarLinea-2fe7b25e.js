document.addEventListener("DOMContentLoaded",()=>{let n=null,t=null;const o=$("#modalConfirmDelete"),d=$("#confirmDeleteBtn"),i=$("#cancelDeleteBtn");$(document).on("click",".btn-delete-line",function(l){l.preventDefault();const a=$(this);n=a.data("line-id"),t=a.data("nomina-id"),o.removeClass("hidden")}),i.on("click",function(){n=null,t=null,o.addClass("hidden")}),d.on("click",async function(){if(!n||!t){o.addClass("hidden");return}const l=document.querySelector('meta[name="csrf-token"]'),a=l?l.getAttribute("content"):"",c=`/admin/nominas/${t}/lineas/${n}`;try{d.prop("disabled",!0).text("Eliminando...");const e=await axios.delete(c,{headers:{"X-CSRF-TOKEN":a,"Content-Type":"application/json"}});if(e&&e.data&&e.data.success){location.reload();return}console.error("Respuesta server:",e.data),location.reload()}catch(e){console.error("Error eliminando l√≠nea:",e),location.reload()}finally{d.prop("disabled",!1).text("Eliminar"),o.addClass("hidden"),n=null,t=null}})});
